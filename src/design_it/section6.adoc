=== 意思決定マトリクス (design it! / 6章)

品質特性をもとに選択肢を比較/検討し意思決定を下す。

.意思決定マトリクスの例
|===
|品質特性シナリオより |3層 |パブリック・サブスクライブ |サービス指向

|可用性(データベースが利用できない)
|+
|o
|+

|可用性(アップタイム要求)
|o
|o
|o

|パフォーマンス(５秒以内の応答)
|o
|-
|+

|セキュリティ
|o
|-
|o

|スケーラビリティ(年間5%の成長)
|o
|o
|+

|保守性(チームの知識)
|+
|-
|o

|構築容易性(実装リクス)
|++
|-
|--

|===

それぞれの記号の意味は次の通り。

[horizontal]
++:: 強く促進する
+:: 促進する
o:: 中立
-:: 抑制する
--:: 強く抑制する

.手引
* 品質特性シナリオは7つ以下を推奨
* 比較する選択肢は最大でも5つを推奨
* ここで決定することは重要事項。論理的根拠を持って比較/検討すること

=== たった一つを選ぶ (design it! / 6章)

対立し合う要素(ここでは品質特性)を競わせる。
プロジェクトの早い段階でざっくりとした方針を決めるために行う。

.対立軸と選択の例
|===
|対立軸 |選択

|パフォーマンスか精度か
|パフォーマンス。精度は必要最低限を満たせていれば良い

|コストか納期か
|納期。特定の日までに必要な機能を取得するために、より大きな技術的負債を受け入れる意思がある

|ユーザビリティとセキュリティ
|セキュリティ。最優先の品質特性で、他の重要な品質特性を上回る

|可用性とコスト
|可用性。高可用性を実現するためには、非常に高いコストをかけて冗長性を担保する必要がある
|===

この他にもトレードオフスライダーという考え方もある。2つ以上の項目が同じ番号を持つことはできないため、優先度を視覚化することができる。

.トレードオフスライダーの例
|===
|要素 |1 |2 |3 |4

|パフォーマンス
|o
|
|
|

|スケーラビリティ
|
|
|o
|

|アジャイル性
|
|
|
|o

|信頼性
|
|o
|
|
|===

=== コンポーネント概要図 (design it! / 6章)

* １つの機能は１つの要素(コンポーネント)によってのみ所有されるようする
* １つの要素(コンポーネント)は１つの以上の機能を担うべき

[plantuml]
----
' top to bottom direction

component [Web UI] as ui #LightBlue
component [表示ビジネス] as gateway
component [お気に入りサービス] as favo
component [検索サービス] as search
component [検索インデックス] as searchindex
component [通知サービス] as notification #LightGreen
component [クローラー] as crawler #LightGreen
database ユーザーメタデータ as user
database 契約 as contract

ui --> gateway

gateway --> favo
gateway --> search

favo --0 user : 読込/書込

search --> searchindex

notification --0 user : 読込
notification --0 contract : 読込

crawler --0 contract : 読込
crawler --> searchindex
----

* 水: JavaScript アプリケーション
* 黄: Webサービス
* 緑: システムプロセス
* 先端矢印: HTTP
* 先端丸: DB ドライバ

.要素カタログ
|===
|要素 |責務

|Web UI
|Web ブラウザでユーザーインターフェイスを表示し、ユーザー操作を処理する。

|表示ビジネス
|認証認可、その他広報サービスへのプロキシ、アプリケーションで使うためのビジネスロジックの検証など。

|検索サービス
|クエリ解析、検索、ページネーション、フィルタリングのコア処理。

|お気に入りサービス
|タグを正規化し、お気に入りを永続ストレージに書き込む。

|通知サービス
|最近の変更を見つけスケジュールし、ユーザーメタデータベースに保存されているサブスクリプションに基づいてメールを送信する。

|クローラー
|契約 DB からデータを読み込み、検索用に変換し、索引化するためにアップロードする。

|ユーザーメタデータ DB
|ユーザーのサブスクリプション情報やユーザーが追加したその他のコンテンツの永続データの保管場所。

|検索インデックス
|検索用に設計された契約データの最適表現。 UI に表示されるすべての契約データは、検索と並び替えが可能であり、保存されている。

|契約 DB
|永続ストレージ。市の RFP データの記録システム。

|HTTP リレーション
|標準の HTTP プロトコルを介したサービス間の通信。 API は RESTful であると想定されている。

|DB ドライバリレーション
|採用するデータベース用のドライバまたはクライアント。
|===
